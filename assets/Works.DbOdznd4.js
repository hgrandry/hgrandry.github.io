import{i as _e}from"./lifecycle.CYL-VhhV.js";import{p as te,A as se,B as re,t as _,a as oe,C as X,c as n,s as p,r as o,g as c,D as Y,d as ue,E as Z,m as ge}from"./runtime.D3AJSUmp.js";import{a as i,t as d,c as ee}from"./template.DLwF89M8.js";import{i as u,s as b,e as G,a as H}from"./attributes.DU3rw1ip.js";import{a as ie,p as J,b as K}from"./props.CgyxvqhT.js";import{o as xe,a as be,i as ke}from"./index-client.BNzU22Za.js";import{s as F,b as he,C as Ee}from"./Card.DSAWZhv8.js";import{e as l,s as S}from"./render.74B-pXJz.js";import{t as k}from"./class.D1BT_rAY.js";import{e as q}from"./work.C_YAWyzT.js";import{w as ae}from"./index._K7fLCSQ.js";/* empty css                       */import"./proxy.DVzrfA23.js";import"./utils.DJ3P7_0R.js";import"./parallax.upw7Ryn0.js";import"./this.B3z5MGQS.js";var we=d('<button class="back-button svelte-180on9e" aria-label="Close expanded view"><i class="fa-solid fa-arrow-left svelte-180on9e"></i></button>'),ye=d('<video autoplay loop playsinline="" preload="auto" class="video-overlay svelte-180on9e"></video>',2),Ae=d('<span class="tag svelte-180on9e"> </span>'),We=d('<div class="tags svelte-180on9e"></div>'),Se=d('<p class="summary svelte-180on9e"> </p>'),Ce=d('<a target="_blank" rel="noopener noreferrer" class="link svelte-180on9e"><i class="fa-solid fa-arrow-up-right-from-square svelte-180on9e"></i> </a>'),Ie=d('<a target="_blank" rel="noopener noreferrer" class="link svelte-180on9e"><i class="fa-solid fa-arrow-up-right-from-square svelte-180on9e"></i> Visit Website</a>'),$e=d('<div class="links svelte-180on9e"><!></div>'),qe=d('<div role="button" tabindex="0" class="work-content svelte-180on9e"><!> <div class="image-container svelte-180on9e"><!> <img class="svelte-180on9e"></div> <div class="content svelte-180on9e"><h3 class="svelte-180on9e"> </h3> <div class="description-wrapper svelte-180on9e"><p class="description svelte-180on9e"> </p></div> <!> <!> <!></div></div>');function ze(z,f){te(f,!1);const C=ie(),h=()=>K(g,"$hovered",C),L=()=>K(I,"$videoLoaded",C);let t=J(f,"work",8),e=J(f,"expandState",8),I=ae(!1),g=ae(!1),E;xe(()=>{E=q.subscribe(a=>{e().setExpanded(a===t().title)})}),be(()=>{E&&E()}),se(()=>(X(e()),X(t())),()=>{e().isExpanded?q.set(t().title):q.set(null)}),re(),_e();var r=qe(),$=n(r);{var D=a=>{var s=we();_(()=>k(s,"fadeOut",!e().isExpanded&&e().isAnimating)),l("click",s,F(()=>e().toggleExpand())),i(a,s)};u($,a=>{(e().isExpanded||e().isAnimating)&&a(D)})}var P=p($,2),N=n(P);{var ne=a=>{var s=ye();s.muted=!0,_(()=>b(s,"src",t().video)),l("error",s,()=>console.warn("Video failed to load, falling back to image")),l("canplay",s,()=>I.set(!0)),i(a,s)};u(N,a=>{t().video&&(h()||e().isExpanded)&&a(ne)})}var V=p(N,2);o(P);var Q=p(P,2),B=n(Q),de=n(B,!0);o(B);var M=p(B,2),R=n(M),le=n(R,!0);o(R),o(M);var T=p(M,2);{var ve=a=>{var s=We();G(s,5,()=>t().tags,H,(w,y)=>{var A=Ae(),v=n(A,!0);o(A),_(()=>S(v,c(y))),i(w,A)}),o(s),i(a,s)};u(T,a=>{t().tags&&a(ve)})}var U=p(T,2);{var pe=a=>{var s=Se(),w=n(s,!0);o(s),_(()=>S(w,t().summary)),l("wheel",s,F(function(y){he.call(this,f,y)})),i(a,s)};u(U,a=>{e().isExpanded&&t().summary&&a(pe)})}var ce=p(U,2);{var fe=a=>{var s=$e(),w=n(s);{var y=v=>{var W=ee(),O=Y(W);G(O,1,()=>t().links,H,(j,x)=>{var m=Ce(),me=p(n(m));o(m),_(()=>{b(m,"href",c(x).href),S(me,` ${c(x).label??""}`)}),i(j,m)}),i(v,W)},A=v=>{var W=ee(),O=Y(W);{var j=x=>{var m=Ie();_(()=>b(m,"href",t().link)),i(x,m)};u(O,x=>{t().link&&x(j)},!0)}i(v,W)};u(w,v=>{t().links?v(y):v(A,!1)})}o(s),i(a,s)};u(ce,a=>{e().isExpanded&&(t().link||t().links)&&a(fe)})}o(Q),o(r),_(()=>{b(r,"aria-expanded",e().isExpanded),k(r,"expanded",e().isExpanded),k(r,"minimizing",!e().isExpanded&&e().isAnimating),k(r,"maximizing",e().isExpanded&&e().isAnimating),k(r,"animating",e().isAnimating),b(V,"src",t().image),b(V,"alt",t().title),k(V,"image-fade",(e().isExpanded||h())&&t().video&&L()),S(de,t().title),S(le,t().description)}),l("wheel",r,F(a=>{e().isExpanded&&a.stopPropagation()})),l("click",r,()=>{e().toggleExpand()}),l("keydown",r,a=>{e().toggleExpand()}),l("mouseenter",r,a=>{g.set(!0)}),l("mouseleave",r,a=>{g.set(!1)}),i(z,r),oe()}var Le=d('<div class="works-grid svelte-b613hu"></div>');function Ue(z,f){te(f,!1);const C=ie(),h=()=>K(q,"$expandedWorkId",C);let L=J(f,"works",8),t=ge(null);se(()=>h(),()=>{ue(t,h())}),re();var e=Le();G(e,5,L,H,(I,g)=>{var E=Z(()=>c(t)===c(g).title);Ee(I,{class_name:"work-card",clickable:!0,get isExpanded(){return c(E)},parallax:{layer:"content",shadow:{size:15,opacity:.1,offset:4}},children:ke,$$slots:{default:(r,$)=>{const D=Z(()=>$.expandState);ze(r,{get work(){return c(g)},get expandState(){return c(D)}})}}})}),o(e),i(z,e),oe()}export{Ue as default};
