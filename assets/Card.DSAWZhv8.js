import{i as xe}from"./lifecycle.CYL-VhhV.js";import{w as ve,p as ye,A as j,B as we,D as be,g as t,d as R,t as G,a as _e,m as C,C as J,s as ae,c as Me,r as Re,F as a}from"./runtime.D3AJSUmp.js";import{e as L}from"./render.74B-pXJz.js";import{a as K,t as N}from"./template.DLwF89M8.js";import{i as ne,s as T}from"./attributes.DU3rw1ip.js";import{s as ze,p as ke,m as Ce}from"./parallax.upw7Ryn0.js";import{t as z,s as $e}from"./class.D1BT_rAY.js";import{b as se}from"./this.B3z5MGQS.js";import{a as Ee,p as y,b as re}from"./props.CgyxvqhT.js";import{o as Fe,a as Pe}from"./index-client.BNzU22Za.js";/* empty css                       */function Ae(w){return function(...r){var h=r[0];return h.stopPropagation(),w?.apply(this,r)}}function Be(w){return function(...r){var h=r[0];return h.preventDefault(),w?.apply(this,r)}}function He(w,r){var h=w.$$events?.[r.type],F=ve(h)?h.slice():h==null?[]:[h];for(var P of F)P.call(this,r)}var Le=N('<div class="backdrop svelte-dabo60" aria-hidden="true"></div>'),Te=N('<div class="placeholder svelte-dabo60"></div>'),Ye=N("<!> <!> <div><!></div>",1);function Qe(w,r){ye(r,!1);const h=Ee(),F=()=>re(ke,"$parallaxFactors",h),P=()=>re(Ce,"$mobile",h),Y=C();let l=y(r,"isExpanded",12,!1),d=y(r,"isAnimating",12,!1),Q=y(r,"isMaximizing",12,!1),U=y(r,"isMinimizing",12,!1),le=y(r,"class_name",8),V=y(r,"background",8,"var(--color-work-card)"),D=y(r,"clickable",8,!1),g=y(r,"parallax",8,null),e=C(),S=C(null),$=C(),A=C(),B=0;function q(i,n){if(n===0||!g())return{parallaxY:0,parallaxRatio:0};const s=typeof window<"u"?window.innerHeight:0,o=s/2;let u;switch(g().centerMode??"section"){case"element":u=i.top+i.height/2;break;case"viewport-relative":u=i.top+(g().viewportOffset??0);break;case"section":default:const _=t(e).closest("section");if(!_)return{parallaxY:0,parallaxRatio:0};const m=_.getBoundingClientRect();u=m.top+m.height/2;break}const f=(o-u)/(s/2),b=n<0?-1:1,c=Math.abs(n),k=b*Math.min(Math.max(-f*c,-c),c);return{parallaxY:k,parallaxRatio:k/n}}function W(){const i=t(e).getBoundingClientRect(),n=q(i,t(A));B=n.parallaxY,t(e).style.setProperty("--parallax-offset",`${B}px`),t(e).style.setProperty("--parallax-ratio",n.parallaxRatio.toString())}Fe(()=>{requestAnimationFrame(W);const i=o=>{W(),l()&&!d()&&o.target===document&&I()};window.addEventListener("scroll",i);let n;const s=()=>{clearTimeout(n),n=setTimeout(W,100)};return window.addEventListener("resize",s),()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",s)}});let H=C(!1);function oe(){!g()||l()||d()||(R(H,!0),t(e).getBoundingClientRect())}function ce(){g()&&R(H,!1)}function de(){const i=window.innerWidth,n=window.innerHeight;return{width:Math.min(i*(P()?1:.9),1200),height:Math.min(n*(P()?1:.95),1e3),left:i/2,top:n/2}}function pe(i,n,s,o){return function(u){if(u===0||u===1)return u;let f=u;for(let b=0;b<4;b++){const c=f,k=(1-c)**3*0+3*(1-c)**2*c*i+3*(1-c)*c**2*s+c**3*1,_=-3*(1-c)**2*0+3*(1-c)**2*i+6*(1-c)*c*(s-i)+3*c**2*(1-s);f=c-(k-u)/_}return(1-f)**3*0+3*(1-f)**2*f*n+3*(1-f)*f**2*o+f**3*1}}const fe=pe(.65,.05,.36,1);function Z(i){Q(i),U(!i);const n=t(e).getBoundingClientRect(),s=i?n:t($).getBoundingClientRect();R(S,s);const o=de();let u=performance.now(),f;a(e,t(e).style.position="fixed"),a(e,t(e).style.zIndex="2000"),a(e,t(e).style.width=i?`${s.width}px`:`${o.width}px`),a(e,t(e).style.height=i?`${s.height}px`:`${o.height}px`),a(e,t(e).style.top=`${s.top}px`),a(e,t(e).style.left=`${s.left}px`),a(e,t(e).style.transition="none"),t(e).offsetHeight;function b(c){const k=c-u,_=Math.min(k/500,1),m=fe(_),M=t($).getBoundingClientRect();if(B=q(M,t(A)).parallaxY,i){const x=v(M.top,o.top-o.height/2,m),E=v(M.left,o.left-o.width/2,m),O=v(s.width,o.width,m),X=v(s.height,o.height,m);a(e,t(e).style.top=`${x}px`),a(e,t(e).style.left=`${E}px`),a(e,t(e).style.width=`${O}px`),a(e,t(e).style.height=`${X}px`)}else{const x=v(o.top-o.height/2,M.top,m),E=v(o.left-o.width/2,M.left,m),O=v(o.width,M.width,m),X=v(o.height,M.height,m);a(e,t(e).style.top=`${x}px`),a(e,t(e).style.left=`${E}px`),a(e,t(e).style.width=`${O}px`),a(e,t(e).style.height=`${X}px`)}if(t(e).style.setProperty("--parallax-offset",`${B}px`),_<1)f=requestAnimationFrame(b);else if(l())a(e,t(e).style.position="fixed"),a(e,t(e).style.transition=""),d(!1);else{const x=t($).getBoundingClientRect(),E=q(x,t(A));a(e,t(e).style.position="fixed"),a(e,t(e).style.top=`${x.top}px`),a(e,t(e).style.left=`${x.left}px`),a(e,t(e).style.width=`${x.width}px`),a(e,t(e).style.height=`${x.height}px`),a(e,t(e).style.margin="0"),t(e).style.setProperty("--parallax-offset",`${E.parallaxY}px`),requestAnimationFrame(()=>{a(e,t(e).style.position="relative"),a(e,t(e).style.top="0"),a(e,t(e).style.left="0"),a(e,t(e).style.margin=""),a(e,t(e).style.zIndex=""),a(e,t(e).style.width=""),a(e,t(e).style.height=""),a(e,t(e).style.transition=""),d(!1)})}}return f=requestAnimationFrame(b),()=>{f&&cancelAnimationFrame(f)}}function v(i,n,s){return i*(1-s)+n*s}function I(){d()||!t(e)||(d(!0),l(!l()),Z(l()))}function ue(i){d()||!t(e)||l()===i||(d(!0),l(i),Z(l()))}Pe(()=>{l()&&document.documentElement.classList.remove("no-scroll")}),j(()=>(J(g()),F()),()=>{R(A,g()?F()[g().layer]:0)}),j(()=>(t(H),J(l())),()=>{R(Y,t(H)&&!l()?1:0)}),j(()=>(t(e),t(Y),J(V())),()=>{t(e)&&(t(e).style.setProperty("--hover-scale",t(Y).toString()),t(e).style.setProperty("--card-background",V()))}),we(),xe();var ee=Ye(),te=be(ee);{var he=i=>{var n=Le();G(()=>z(n,"fadeOut",!l()&&d())),L("click",n,Ae(()=>I())),L("wheel",n,Be(function(s){He.call(this,r,s)})),K(i,n)};ne(te,i=>{(l()||d())&&i(he)})}var ie=ae(te,2);{var me=i=>{var n=Te();se(n,s=>R($,s),()=>t($)),G(()=>T(n,"style",`width: ${t(S)?.width??""}px; height: ${t(S)?.height??""}px;`)),K(i,n)};ne(ie,i=>{(d()||l())&&i(me)})}var p=ae(ie,2),ge=Me(p);ze(ge,r,"default",{get expandState(){return{isExpanded:l(),isAnimating:d(),isMaximizing:Q(),isMinimizing:U(),toggleExpand:I,setExpanded:ue}}}),Re(p),se(p,i=>R(e,i),()=>t(e)),G(()=>{T(p,"role",D()?"button":void 0),T(p,"tabindex",D()?0:void 0),$e(p,`card ${le()??""} svelte-dabo60`),T(p,"aria-expanded",l()),z(p,"expanded",l()),z(p,"minimizing",!l()&&d()),z(p,"maximizing",l()&&d()),z(p,"animating",d()),z(p,"parallax",!!g()),z(p,"clickable",D())}),L("mouseenter",p,oe),L("mouseleave",p,ce),K(w,ee),_e()}export{Qe as C,He as b,Ae as s};
