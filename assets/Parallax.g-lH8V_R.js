import{i as H}from"./lifecycle.DIFoE0P3.js";import{p as D,B as F,C as W,t as j,a as G,g as r,c as I,f as M,m as P,D as J,r as K}from"./runtime.D0cKiUdn.js";import{a as N,t as Q}from"./template.xghE3FVS.js";import{s as U}from"./slot.DciUBXO5.js";import{o as V,s as X}from"./index-client.DXXyS-C5.js";import{b as Z}from"./this.BOE1u79u.js";import{a as $,p as n,b as k}from"./props.BB-HR_cq.js";import{d as ee,w as te}from"./index.TyNKgPmN.js";/* empty css                       */import"./proxy.DjauZPiP.js";import"./utils.DwVOqfoQ.js";const z=()=>window.innerWidth<=768,ae={background:-100,title:-50,contact:100,content:100},g=te(typeof window<"u"?z():!1);typeof window<"u"&&window.addEventListener("resize",()=>{g.set(z())});const oe=ee(g,u=>u?{background:0,title:0,contact:0,content:0}:ae);var re=Q("<div><!></div>");function ge(u,a){D(a,!1);const x=$(),b=()=>k(oe,"$parallaxFactors",x),h=()=>k(g,"$mobile",x);let v=n(a,"layer",8),B=n(a,"class_name",8,""),E=n(a,"parallaxRatio",12,0),c=n(a,"onRatioChange",8,void 0),m=n(a,"shadowTarget",8,void 0),f=n(a,"shadowConfig",24,()=>({baseOffset:5,offsetRange:10,baseBlur:5,blurRange:10,opacity:.3})),L=n(a,"centerMode",8,"section"),T=n(a,"viewportOffset",8,0),o=P(),R=P();function q(t,e){if(e===0)return c()&&c()(0),{parallaxY:0,parallaxRatio:0};const s=typeof window<"u"?window.innerHeight:0,i=s/2;let p;switch(L()){case"element":p=t.top+t.height/2;break;case"viewport-relative":p=t.top+T();break;case"section":default:const _=r(o).closest("section");if(!_)return{parallaxY:0,parallaxRatio:0};const C=_.getBoundingClientRect();p=C.top+C.height/2;break}const Y=(i-p)/(s/2),A=e<0?-1:1,w=Math.abs(e),y=A*Math.min(Math.max(-Y*w,-w),w);return{parallaxY:y,parallaxRatio:y/e}}function O(t){if(!m())return;const e=document.querySelector(m());if(!e)return;const s=f().baseOffset+t*f().offsetRange,i=f().baseBlur+Math.abs(t)*f().blurRange;e.style.setProperty("--shadow-offset",`${s}px`),e.style.setProperty("--shadow-blur",`${i}px`)}function d(){if(!r(o))return;const t=r(o).getBoundingClientRect(),e=q(t,r(R));E(e.parallaxRatio),c()&&c()(e.parallaxRatio),m()&&O(e.parallaxRatio),r(o).style.setProperty("--parallax-offset",`${e.parallaxY}px`),r(o).style.setProperty("--parallax-ratio",e.parallaxRatio.toString())}V(()=>{requestAnimationFrame(d);let t=!1;const e=()=>{t||(requestAnimationFrame(()=>{d(),t=!1}),t=!0)};window.addEventListener("scroll",e,{passive:!0});let s;const i=()=>{clearTimeout(s),s=setTimeout(d,100)};return window.addEventListener("resize",i),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",i)}}),F(()=>(b(),J(v())),()=>{M(R,b()[v()])}),F(()=>(r(o),h()),()=>{r(o)&&h()!==void 0&&d()}),W(),H();var l=re(),S=I(l);U(S,a,"default",{}),K(l),Z(l,t=>M(o,t),()=>r(o)),j(()=>X(l,`parallax ${B()??""} svelte-qw1gfc`)),N(u,l),G()}export{ge as default};
