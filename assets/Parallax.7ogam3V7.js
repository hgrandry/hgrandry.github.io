import{i as Y}from"./lifecycle.CYL-VhhV.js";import{p as A,A as _,B as H,t as j,a as D,g as r,c as G,d as C,m as F,C as I,r as J}from"./runtime.D3AJSUmp.js";import{a as K,t as N}from"./template.DLwF89M8.js";import{s as Q,p as U,m as V}from"./parallax.upw7Ryn0.js";import{s as W}from"./class.D1BT_rAY.js";import{b as X}from"./this.B3z5MGQS.js";import{a as Z,p as s,b as M}from"./props.CgyxvqhT.js";import{o as $}from"./index-client.BNzU22Za.js";/* empty css                       */import"./index._K7fLCSQ.js";import"./utils.DJ3P7_0R.js";import"./proxy.DVzrfA23.js";var ee=N("<div><!></div>");function me(P,a){A(a,!1);const g=Z(),x=()=>M(U,"$parallaxFactors",g),w=()=>M(V,"$mobile",g);let h=s(a,"layer",8),B=s(a,"class_name",8,""),T=s(a,"parallaxRatio",12,0),c=s(a,"onRatioChange",8,void 0),m=s(a,"shadowTarget",8,void 0),f=s(a,"shadowConfig",24,()=>({baseOffset:5,offsetRange:10,baseBlur:5,blurRange:10,opacity:.3})),k=s(a,"centerMode",8,"section"),q=s(a,"viewportOffset",8,0),o=F(),b=F();function z(t,e){if(e===0)return c()&&c()(0),{parallaxY:0,parallaxRatio:0};const l=typeof window<"u"?window.innerHeight:0,i=l/2;let d;switch(k()){case"element":d=t.top+t.height/2;break;case"viewport-relative":d=t.top+q();break;case"section":default:const R=r(o).closest("section");if(!R)return{parallaxY:0,parallaxRatio:0};const y=R.getBoundingClientRect();d=y.top+y.height/2;break}const O=(i-d)/(l/2),S=e<0?-1:1,u=Math.abs(e),v=S*Math.min(Math.max(-O*u,-u),u);return{parallaxY:v,parallaxRatio:v/e}}function E(t){if(!m())return;const e=document.querySelector(m());if(!e)return;const l=f().baseOffset+t*f().offsetRange,i=f().baseBlur+Math.abs(t)*f().blurRange;e.style.setProperty("--shadow-offset",`${l}px`),e.style.setProperty("--shadow-blur",`${i}px`)}function p(){if(!r(o))return;const t=r(o).getBoundingClientRect(),e=z(t,r(b));T(e.parallaxRatio),c()&&c()(e.parallaxRatio),m()&&E(e.parallaxRatio),r(o).style.setProperty("--parallax-offset",`${e.parallaxY}px`),r(o).style.setProperty("--parallax-ratio",e.parallaxRatio.toString())}$(()=>{requestAnimationFrame(p);let t=!1;const e=()=>{t||(requestAnimationFrame(()=>{p(),t=!1}),t=!0)};window.addEventListener("scroll",e,{passive:!0});let l;const i=()=>{clearTimeout(l),l=setTimeout(p,100)};return window.addEventListener("resize",i),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",i)}}),_(()=>(x(),I(h())),()=>{C(b,x()[h()])}),_(()=>(r(o),w()),()=>{r(o)&&w()!==void 0&&p()}),H(),Y();var n=ee(),L=G(n);Q(L,a,"default",{}),J(n),X(n,t=>C(o,t),()=>r(o)),j(()=>W(n,`parallax ${B()??""} svelte-qw1gfc`)),K(P,n),D()}export{me as default};
