import{i as H}from"./utils.CMPblA59.js";import{j,k as N,p as W,L as k,M as D,c as G,a as I,b as J,t as K,g as o,d as Q,x as F,y as P,N as U,r as V}from"./template.DO1ppPmA.js";import{d as X,w as Z,o as $,s as ee}from"./index.BCK9oKRt.js";import{b as te}from"./this.DBs-KVS-.js";import{a as ae,p as s,b as L}from"./props.DFuPF5-n.js";/* empty css                       */import"./proxy.CnDcVdtB.js";function ne(c,a,u,f,x){j&&N();var r=a.$$slots?.[u],p=!1;r===!0&&(r=a.children,p=!0),r===void 0||r(c,p?()=>f:f)}const z=()=>window.innerWidth<=768,oe={background:-100,title:-50,contact:100,content:100},y=Z(typeof window<"u"?z():!1);typeof window<"u"&&window.addEventListener("resize",()=>{y.set(z())});const se=X(y,c=>c?{background:0,title:0,contact:0,content:0}:oe);var re=K("<div><!></div>");function we(c,a){W(a,!1);const u=ae(),f=()=>L(se,"$parallaxFactors",u),x=()=>L(y,"$mobile",u);let r=s(a,"layer",8),p=s(a,"class_name",8,""),E=s(a,"parallaxRatio",12,0),w=s(a,"onRatioChange",8,void 0),b=s(a,"shadowTarget",8,void 0),m=s(a,"shadowConfig",24,()=>({baseOffset:5,offsetRange:10,baseBlur:5,blurRange:10,opacity:.3})),T=s(a,"centerMode",8,"section"),q=s(a,"viewportOffset",8,0),n=P(),R=P();function B(t,e){if(e===0)return w()&&w()(0),{parallaxY:0,parallaxRatio:0};const i=typeof window<"u"?window.innerHeight:0,l=i/2;let h;switch(T()){case"element":h=t.top+t.height/2;break;case"viewport-relative":h=t.top+q();break;case"section":default:const C=o(n).closest("section");if(!C)return{parallaxY:0,parallaxRatio:0};const M=C.getBoundingClientRect();h=M.top+M.height/2;break}const Y=(l-h)/(i/2),A=e<0?-1:1,v=Math.abs(e),_=A*Math.min(Math.max(-Y*v,-v),v);return{parallaxY:_,parallaxRatio:_/e}}function O(t){if(!b())return;const e=document.querySelector(b());if(!e)return;const i=m().baseOffset+t*m().offsetRange,l=m().baseBlur+Math.abs(t)*m().blurRange;e.style.setProperty("--shadow-offset",`${i}px`),e.style.setProperty("--shadow-blur",`${l}px`)}function g(){if(!o(n))return;const t=o(n).getBoundingClientRect(),e=B(t,o(R));E(e.parallaxRatio),w()&&w()(e.parallaxRatio),b()&&O(e.parallaxRatio),o(n).style.setProperty("--parallax-offset",`${e.parallaxY}px`),o(n).style.setProperty("--parallax-ratio",e.parallaxRatio.toString())}$(()=>{requestAnimationFrame(g);let t=!1;const e=()=>{t||(requestAnimationFrame(()=>{g(),t=!1}),t=!0)};window.addEventListener("scroll",e,{passive:!0});let i;const l=()=>{clearTimeout(i),i=setTimeout(g,100)};return window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",l)}}),k(()=>(f(),U(r())),()=>{F(R,f()[r()])}),k(()=>(o(n),x()),()=>{o(n)&&x()!==void 0&&g()}),D(),H();var d=re(),S=Q(d);ne(S,a,"default",{}),V(d),te(d,t=>F(n,t),()=>o(n)),G(()=>ee(d,`parallax ${p()??""} svelte-qw1gfc`)),I(c,d),J()}export{we as default};
