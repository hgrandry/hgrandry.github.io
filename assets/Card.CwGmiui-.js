import{i as ye}from"./lifecycle.CYL-VhhV.js";import{w as we,p as be,A as O,B as _e,D as Me,g as t,d as M,t as X,a as ze,m as R,C as j,s as ie,c as Re,r as Ce,F as a}from"./runtime.D3AJSUmp.js";import{e as T}from"./render.74B-pXJz.js";import{a as G,t as J}from"./template.DLwF89M8.js";import{i as ae,s as ne}from"./attributes.DU3rw1ip.js";import{s as Ee,p as ke,m as Fe}from"./parallax.upw7Ryn0.js";import{t as C,s as Pe}from"./class.D1BT_rAY.js";import{b as re}from"./this.B3z5MGQS.js";import{a as Ae,p as g,b as se}from"./props.CgyxvqhT.js";import{o as Be,a as He}from"./index-client.BNzU22Za.js";/* empty css                       */function Le(y){return function(...s){var h=s[0];return h.stopPropagation(),y?.apply(this,s)}}function Te(y){return function(...s){var h=s[0];return h.preventDefault(),y?.apply(this,s)}}function Ye(y,s){var h=y.$$events?.[s.type],F=we(h)?h.slice():h==null?[]:[h];for(var P of F)P.call(this,s)}var $e=J('<div class="backdrop svelte-1ywxoag" aria-hidden="true"></div>'),De=J('<div class="placeholder svelte-1ywxoag"></div>'),qe=J('<!> <!> <div role="button" tabindex="0"><!></div>',1);function Ve(y,s){be(s,!1);const h=Ae(),F=()=>se(ke,"$parallaxFactors",h),P=()=>se(Fe,"$mobile",h),Y=R();let l=g(s,"isExpanded",12,!1),d=g(s,"isAnimating",12,!1),K=g(s,"isMaximizing",12,!1),N=g(s,"isMinimizing",12,!1),le=g(s,"class_name",8),A=g(s,"parallaxEnabled",8,!1),Q=g(s,"layer",8,"default"),oe=g(s,"centerMode",8,"section"),ce=g(s,"viewportOffset",8,0);g(s,"shadow",24,()=>({enabled:!1,size:15,opacity:.1,offset:4}));let U=g(s,"background",8,"var(--color-work-card)"),e=R(),$=R(null),E=R(),B=R(),H=0;function D(i,n){if(n===0||!A())return{parallaxY:0,parallaxRatio:0};const r=typeof window<"u"?window.innerHeight:0,o=r/2;let u;switch(oe()){case"element":u=i.top+i.height/2;break;case"viewport-relative":u=i.top+ce();break;case"section":default:const b=t(e).closest("section");if(!b)return{parallaxY:0,parallaxRatio:0};const m=b.getBoundingClientRect();u=m.top+m.height/2;break}const f=(o-u)/(r/2),w=n<0?-1:1,c=Math.abs(n),z=w*Math.min(Math.max(-f*c,-c),c);return{parallaxY:z,parallaxRatio:z/n}}function q(){const i=t(e).getBoundingClientRect(),n=D(i,t(B));H=n.parallaxY,t(e).style.setProperty("--parallax-offset",`${H}px`),t(e).style.setProperty("--parallax-ratio",n.parallaxRatio.toString())}Be(()=>{requestAnimationFrame(q);const i=o=>{q(),l()&&!d()&&o.target===document&&S()};window.addEventListener("scroll",i);let n;const r=()=>{clearTimeout(n),n=setTimeout(q,100)};return window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",r)}});let L=R(!1);function de(){!A()||l()||d()||(M(L,!0),t(e).getBoundingClientRect())}function fe(){A()&&M(L,!1)}function pe(){const i=window.innerWidth,n=window.innerHeight;return{width:Math.min(i*(P()?1:.9),1200),height:Math.min(n*(P()?1:.95),1e3),left:i/2,top:n/2}}function ue(i,n,r,o){return function(u){if(u===0||u===1)return u;let f=u;for(let w=0;w<4;w++){const c=f,z=(1-c)**3*0+3*(1-c)**2*c*i+3*(1-c)*c**2*r+c**3*1,b=-3*(1-c)**2*0+3*(1-c)**2*i+6*(1-c)*c*(r-i)+3*c**2*(1-r);f=c-(z-u)/b}return(1-f)**3*0+3*(1-f)**2*f*n+3*(1-f)*f**2*o+f**3*1}}const he=ue(.65,.05,.36,1);function V(i){K(i),N(!i);const n=t(e).getBoundingClientRect(),r=i?n:t(E).getBoundingClientRect();M($,r);const o=pe();let u=performance.now(),f;a(e,t(e).style.position="fixed"),a(e,t(e).style.zIndex="2000"),a(e,t(e).style.width=i?`${r.width}px`:`${o.width}px`),a(e,t(e).style.height=i?`${r.height}px`:`${o.height}px`),a(e,t(e).style.top=`${r.top}px`),a(e,t(e).style.left=`${r.left}px`),a(e,t(e).style.transition="none"),t(e).offsetHeight;function w(c){const z=c-u,b=Math.min(z/500,1),m=he(b),_=t(E).getBoundingClientRect();if(H=D(_,t(B)).parallaxY,i){const x=v(_.top,o.top-o.height/2,m),k=v(_.left,o.left-o.width/2,m),W=v(r.width,o.width,m),I=v(r.height,o.height,m);a(e,t(e).style.top=`${x}px`),a(e,t(e).style.left=`${k}px`),a(e,t(e).style.width=`${W}px`),a(e,t(e).style.height=`${I}px`)}else{const x=v(o.top-o.height/2,_.top,m),k=v(o.left-o.width/2,_.left,m),W=v(o.width,_.width,m),I=v(o.height,_.height,m);a(e,t(e).style.top=`${x}px`),a(e,t(e).style.left=`${k}px`),a(e,t(e).style.width=`${W}px`),a(e,t(e).style.height=`${I}px`)}if(t(e).style.setProperty("--parallax-offset",`${H}px`),b<1)f=requestAnimationFrame(w);else if(l())a(e,t(e).style.position="fixed"),a(e,t(e).style.transition=""),d(!1);else{const x=t(E).getBoundingClientRect(),k=D(x,t(B));a(e,t(e).style.position="fixed"),a(e,t(e).style.top=`${x.top}px`),a(e,t(e).style.left=`${x.left}px`),a(e,t(e).style.width=`${x.width}px`),a(e,t(e).style.height=`${x.height}px`),a(e,t(e).style.margin="0"),t(e).style.setProperty("--parallax-offset",`${k.parallaxY}px`),requestAnimationFrame(()=>{a(e,t(e).style.position="relative"),a(e,t(e).style.top="0"),a(e,t(e).style.left="0"),a(e,t(e).style.margin=""),a(e,t(e).style.zIndex=""),a(e,t(e).style.width=""),a(e,t(e).style.height=""),a(e,t(e).style.transition=""),d(!1)})}}return f=requestAnimationFrame(w),()=>{f&&cancelAnimationFrame(f)}}function v(i,n,r){return i*(1-r)+n*r}function S(){d()||!t(e)||(d(!0),l(!l()),V(l()))}function me(i){d()||!t(e)||l()===i||(d(!0),l(i),V(l()))}He(()=>{l()&&document.documentElement.classList.remove("no-scroll")}),O(()=>(F(),j(Q())),()=>{M(B,F()[Q()])}),O(()=>(t(L),j(l())),()=>{M(Y,t(L)&&!l()?1:0)}),O(()=>(t(e),t(Y),j(U())),()=>{t(e)&&(t(e).style.setProperty("--hover-scale",t(Y).toString()),t(e).style.setProperty("--card-background",U()))}),_e(),ye();var Z=qe(),ee=Me(Z);{var ge=i=>{var n=$e();X(()=>C(n,"fadeOut",!l()&&d())),T("click",n,Le(()=>S())),T("wheel",n,Te(function(r){Ye.call(this,s,r)})),G(i,n)};ae(ee,i=>{(l()||d())&&i(ge)})}var te=ie(ee,2);{var xe=i=>{var n=De();re(n,r=>M(E,r),()=>t(E)),X(()=>ne(n,"style",`width: ${t($)?.width??""}px; height: ${t($)?.height??""}px;`)),G(i,n)};ae(te,i=>{(d()||l())&&i(xe)})}var p=ie(te,2),ve=Re(p);Ee(ve,s,"default",{get isExpanded(){return l()},get isAnimating(){return d()},get isMaximizing(){return K()},get isMinimizing(){return N()},toggleExpand:S,setExpanded:me}),Ce(p),re(p,i=>M(e,i),()=>t(e)),X(()=>{Pe(p,`card ${le()??""} svelte-1ywxoag`),ne(p,"aria-expanded",l()),C(p,"expanded",l()),C(p,"minimizing",!l()&&d()),C(p,"maximizing",l()&&d()),C(p,"animating",d()),C(p,"parallax",A())}),T("mouseenter",p,de),T("mouseleave",p,fe),G(y,Z),ze()}export{Ve as C,Ye as b,Le as s};
