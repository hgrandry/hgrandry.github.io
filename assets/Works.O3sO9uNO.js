import{i as ce}from"./lifecycle.CYL-VhhV.js";import{p as Y,A as Z,B as ee,t as f,a as ae,C as R,c as n,s as v,r as i,g as p,D as T,d as me,E as U,m as fe}from"./runtime.D3AJSUmp.js";import{a as o,t as d,c as X}from"./template.DLwF89M8.js";import{i as _,s as b,e as F,a as G}from"./attributes.DU3rw1ip.js";import{a as te,p as H,b as se}from"./props.CgyxvqhT.js";import{o as _e,a as ge,i as ue}from"./index-client.BNzU22Za.js";import{s as j,b as xe,C as be}from"./Card.DSAWZhv8.js";import{e as g,s as S}from"./render.74B-pXJz.js";import{t as k}from"./class.D1BT_rAY.js";import{e as q}from"./work.C_YAWyzT.js";import{w as ke}from"./index._K7fLCSQ.js";/* empty css                       */import"./proxy.DVzrfA23.js";import"./utils.DJ3P7_0R.js";import"./parallax.upw7Ryn0.js";import"./this.B3z5MGQS.js";var Ee=d('<button class="back-button svelte-180on9e" aria-label="Close expanded view"><i class="fa-solid fa-arrow-left svelte-180on9e"></i></button>'),we=d('<video autoplay loop playsinline="" preload="metadata" class="video-overlay svelte-180on9e"></video>',2),he=d('<span class="tag svelte-180on9e"> </span>'),ye=d('<div class="tags svelte-180on9e"></div>'),Ae=d('<p class="summary svelte-180on9e"> </p>'),We=d('<a target="_blank" rel="noopener noreferrer" class="link svelte-180on9e"><i class="fa-solid fa-arrow-up-right-from-square svelte-180on9e"></i> </a>'),Se=d('<a target="_blank" rel="noopener noreferrer" class="link svelte-180on9e"><i class="fa-solid fa-arrow-up-right-from-square svelte-180on9e"></i> Visit Website</a>'),ze=d('<div class="links svelte-180on9e"><!></div>'),Ce=d('<div role="button" tabindex="0" class="work-content svelte-180on9e"><!> <div class="image-container svelte-180on9e"><!> <img class="svelte-180on9e"></div> <div class="content svelte-180on9e"><h3 class="svelte-180on9e"> </h3> <div class="description-wrapper svelte-180on9e"><p class="description svelte-180on9e"> </p></div> <!> <!> <!></div></div>');function Ie(L,c){Y(c,!1);const D=te(),z=()=>se(u,"$videoLoaded",D);let t=H(c,"work",8),e=H(c,"expandState",8),u=ke(!1),E;_e(()=>{E=q.subscribe(a=>{e().setExpanded(a===t().title)})}),ge(()=>{E&&E()}),Z(()=>(R(e()),R(t())),()=>{e().isExpanded?q.set(t().title):q.set(null)}),ee(),ce();var r=Ce(),C=n(r);{var M=a=>{var s=Ee();f(()=>k(s,"fadeOut",!e().isExpanded&&e().isAnimating)),g("click",s,j(()=>e().toggleExpand())),o(a,s)};_(C,a=>{(e().isExpanded||e().isAnimating)&&a(M)})}var w=v(C,2),I=n(w);{var re=a=>{var s=we();s.muted=!0,f(()=>b(s,"src",t().video)),g("error",s,()=>console.warn("Video failed to load, falling back to image")),g("canplay",s,()=>u.set(!0)),o(a,s)};_(I,a=>{(e().isExpanded||e().isAnimating)&&t().video&&a(re)})}var P=v(I,2);i(w);var J=v(w,2),V=n(J),ie=n(V,!0);i(V);var $=v(V,2),K=n($),oe=n(K,!0);i(K),i($);var N=v($,2);{var ne=a=>{var s=ye();F(s,5,()=>t().tags,G,(h,y)=>{var A=he(),l=n(A,!0);i(A),f(()=>S(l,p(y))),o(h,A)}),i(s),o(a,s)};_(N,a=>{t().tags&&a(ne)})}var Q=v(N,2);{var de=a=>{var s=Ae(),h=n(s,!0);i(s),f(()=>S(h,t().summary)),g("wheel",s,j(function(y){xe.call(this,c,y)})),o(a,s)};_(Q,a=>{e().isExpanded&&t().summary&&a(de)})}var le=v(Q,2);{var ve=a=>{var s=ze(),h=n(s);{var y=l=>{var W=X(),B=T(W);F(B,1,()=>t().links,G,(O,x)=>{var m=We(),pe=v(n(m));i(m),f(()=>{b(m,"href",p(x).href),S(pe,` ${p(x).label??""}`)}),o(O,m)}),o(l,W)},A=l=>{var W=X(),B=T(W);{var O=x=>{var m=Se();f(()=>b(m,"href",t().link)),o(x,m)};_(B,x=>{t().link&&x(O)},!0)}o(l,W)};_(h,l=>{t().links?l(y):l(A,!1)})}i(s),o(a,s)};_(le,a=>{e().isExpanded&&(t().link||t().links)&&a(ve)})}i(J),i(r),f(()=>{b(r,"aria-expanded",e().isExpanded),k(r,"expanded",e().isExpanded),k(r,"minimizing",!e().isExpanded&&e().isAnimating),k(r,"maximizing",e().isExpanded&&e().isAnimating),k(r,"animating",e().isAnimating),b(P,"src",t().image),b(P,"alt",t().title),k(P,"image-fade",e().isExpanded&&!e().isMinimizing&&t().video&&z()),S(ie,t().title),S(oe,t().description)}),g("wheel",r,j(a=>{e().isExpanded&&a.stopPropagation()})),g("click",r,()=>{e().toggleExpand()}),g("keydown",r,a=>{e().toggleExpand()}),o(L,r),ae()}var qe=d('<div class="works-grid svelte-b613hu"></div>');function Re(L,c){Y(c,!1);const D=te(),z=()=>se(q,"$expandedWorkId",D);let t=H(c,"works",8),e=fe(null);Z(()=>z(),()=>{me(e,z())}),ee();var u=qe();F(u,5,t,G,(E,r)=>{var C=U(()=>p(e)===p(r).title);be(E,{class_name:"work-card",clickable:!0,get isExpanded(){return p(C)},parallax:{layer:"content",shadow:{size:15,opacity:.1,offset:4}},children:ue,$$slots:{default:(M,w)=>{const I=U(()=>w.expandState);Ie(M,{get work(){return p(r)},get expandState(){return p(I)}})}}})}),i(u),o(L,u),ae()}export{Re as default};
