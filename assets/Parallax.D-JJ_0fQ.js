import{i as H}from"./utils.vNBKzEkj.js";import{j,k as Q,p as W,O as F,P as D,c as G,a as I,b as J,t as K,g as o,d as N,A as M,B as P,Q as U,r as V}from"./template.DbfV741Q.js";import{o as X,s as Z}from"./index-client.CtBxzlR2.js";import{b as $}from"./this.DM_fwHbK.js";import{a as ee,p as r,b as z}from"./props.Cw2u0vRJ.js";import{d as te,w as ae}from"./index.DJ3hts1W.js";/* empty css                       */import"./proxy.ERrKhqz9.js";function ne(c,a,u,f,b){j&&Q();var s=a.$$slots?.[u],p=!1;s===!0&&(s=a.children,p=!0),s===void 0||s(c,p?()=>f:f)}const B=()=>window.innerWidth<=768,oe={background:-100,title:-50,contact:100,content:100},y=ae(typeof window<"u"?B():!1);typeof window<"u"&&window.addEventListener("resize",()=>{y.set(B())});const re=te(y,c=>c?{background:0,title:0,contact:0,content:0}:oe);var se=K("<div><!></div>");function we(c,a){W(a,!1);const u=ee(),f=()=>z(re,"$parallaxFactors",u),b=()=>z(y,"$mobile",u);let s=r(a,"layer",8),p=r(a,"class_name",8,""),E=r(a,"parallaxRatio",12,0),m=r(a,"onRatioChange",8,void 0),x=r(a,"shadowTarget",8,void 0),w=r(a,"shadowConfig",24,()=>({baseOffset:5,offsetRange:10,baseBlur:5,blurRange:10,opacity:.3})),L=r(a,"centerMode",8,"section"),O=r(a,"viewportOffset",8,0),n=P(),R=P();function T(t,e){if(e===0)return m()&&m()(0),{parallaxY:0,parallaxRatio:0};const i=typeof window<"u"?window.innerHeight:0,l=i/2;let h;switch(L()){case"element":h=t.top+t.height/2;break;case"viewport-relative":h=t.top+O();break;case"section":default:const C=o(n).closest("section");if(!C)return{parallaxY:0,parallaxRatio:0};const k=C.getBoundingClientRect();h=k.top+k.height/2;break}const Y=(l-h)/(i/2),A=e<0?-1:1,v=Math.abs(e),_=A*Math.min(Math.max(-Y*v,-v),v);return{parallaxY:_,parallaxRatio:_/e}}function q(t){if(!x())return;const e=document.querySelector(x());if(!e)return;const i=w().baseOffset+t*w().offsetRange,l=w().baseBlur+Math.abs(t)*w().blurRange;e.style.setProperty("--shadow-offset",`${i}px`),e.style.setProperty("--shadow-blur",`${l}px`)}function g(){if(!o(n))return;const t=o(n).getBoundingClientRect(),e=T(t,o(R));E(e.parallaxRatio),m()&&m()(e.parallaxRatio),x()&&q(e.parallaxRatio),o(n).style.setProperty("--parallax-offset",`${e.parallaxY}px`),o(n).style.setProperty("--parallax-ratio",e.parallaxRatio.toString())}X(()=>{requestAnimationFrame(g);let t=!1;const e=()=>{t||(requestAnimationFrame(()=>{g(),t=!1}),t=!0)};window.addEventListener("scroll",e,{passive:!0});let i;const l=()=>{clearTimeout(i),i=setTimeout(g,100)};return window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",l)}}),F(()=>(f(),U(s())),()=>{M(R,f()[s()])}),F(()=>(o(n),b()),()=>{o(n)&&b()!==void 0&&g()}),D(),H();var d=se(),S=N(d);ne(S,a,"default",{}),V(d),$(d,t=>M(n,t),()=>o(n)),G(()=>Z(d,`parallax ${p()??""} svelte-qw1gfc`)),I(c,d),J()}export{we as default};
